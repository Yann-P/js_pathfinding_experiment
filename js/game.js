// Generated by CoffeeScript 1.3.3
(function() {

  define(['lib/jquery', 'data', 'types', 'zombie'], function($, Data, Types, Zombie) {
    var Game;
    Game = (function() {

      function Game(level, app) {
        var data;
        this.level = level;
        this.app = app;
        this.entityCount = 0;
        this.zombies = {};
        data = Data.store.levels[this.level];
        this.name = data.name;
        this.blocking = data.map.blocking;
        this.gold = data.initialGold;
        this.backgroundPath = "resources/img/maps/" + this.name + ".png";
        this.loadMap();
        this.addZombie();
      }

      Game.prototype.loadMap = function() {
        return document.getElementById('game').style.backgroundImage = "url('" + this.backgroundPath + "')";
      };

      Game.prototype.addZombie = function() {
        var zombie;
        zombie = this.zombies[this.entityCount] = new Zombie(this.entityCount, Types.Zombies.WEAK);
        zombie.setPosition(1, 1, true);
        zombie.sprite.setAnimation('move_up');
        this.entityCount++;
        return zombie.setMoveStack([[1, 1], [2, 1], [2, 2], [2, 3], [3, 3]]);
      };

      return Game;

    })();
    return Game;
  });

}).call(this);
