// Generated by CoffeeScript 1.3.3
(function() {

  define(['lib/jquery', 'data', 'sprite', 'animation'], function($, Data, Sprite, Animation) {
    var Entity;
    return Entity = (function() {

      function Entity(id, kind) {
        this.id = id;
        this.kind = kind;
        this.x = 0;
        this.y = 0;
        this.elt = null;
        this.sprite = null;
        this.currentAnimation = null;
        this.sprite = new Sprite(this.kind, this);
        this.animations = this.sprite.createAnimations();
        this.createElt();
        this.setAnimation('idle_down');
      }

      Entity.prototype.createElt = function() {
        this.elt = document.createElement('div');
        return $(this.elt).addClass('entity').appendTo('#game');
      };

      Entity.prototype.setBackground = function(imagepath, x, y) {
        this.elt.style.backgroundImage = "url('resources/img/" + imagepath + "')";
        return this.elt.style.backgroundPosition = (-x) + 'px ' + (-y) + 'px';
      };

      Entity.prototype.setPosition = function(x, y) {
        this.x = x;
        this.y = y;
        this.elt.style.left = (x * 32) + 'px';
        return this.elt.style.top = (y * 32) + 'px';
      };

      Entity.prototype.setAnimation = function(animationid) {
        var animation;
        animation = this.animations[animationid];
        if (this.currentAnimation instanceof Animation) {
          this.currentAnimation.stop();
        }
        this.currentAnimation = animation;
        return this.currentAnimation.start();
      };

      Entity.prototype.remove = function() {
        this.elt.remove();
        return delete this;
      };

      return Entity;

    })();
  });

}).call(this);
