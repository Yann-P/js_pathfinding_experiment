// Generated by CoffeeScript 1.3.3
(function() {

  define(['lib/jquery', 'data', 'sprite'], function($, Data, Sprite) {
    var Entity;
    Entity = (function() {

      function Entity(id, kind) {
        this.id = id;
        this.kind = kind;
        this.x = 0;
        this.y = 0;
        this.elt = null;
        this.sprite = null;
        this.sprite = new Sprite(this.kind, this);
        this.createElt();
      }

      Entity.prototype.createElt = function() {
        this.elt = document.createElement('div');
        return $(this.elt).addClass('entity').appendTo('#game');
      };

      Entity.prototype.setBackground = function(imagepath, x, y) {
        this.elt.style.backgroundImage = "url('resources/img/" + imagepath + "')";
        this.elt.style.backgroundPositionX = -x + 'px';
        return this.elt.style.backgroundPositionY = -y + 'px';
      };

      Entity.prototype.setPosition = function(x, y, render) {
        this.x = x;
        this.y = y;
        if (render) {
          this.elt.style.left = this.x * 32 + 'px';
          return this.elt.style.top = this.y * 32 + 'px';
        }
      };

      Entity.prototype.moveElt = function(x, y, callback) {
        var $elt,
          _this = this;
        console.log('move');
        $elt = $(this.elt);
        return $elt.animate({
          left: x * 32,
          top: y * 32
        }, 1000 / this.speed, 'linear', function() {
          _this.setPosition(x, y, true);
          return callback();
        });
      };

      return Entity;

    })();
    return Entity;
  });

}).call(this);
