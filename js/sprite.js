// Generated by CoffeeScript 1.3.3
(function() {

  define(['data', 'animation'], function(Data, Animation) {
    var Sprite;
    return Sprite = (function() {

      function Sprite(name, entity) {
        var data;
        this.name = name;
        this.entity = entity;
        data = Data.store.sprites[this.name] || (function() {
          throw "Sprite '" + name + "' inexistant";
        })();
        this.nbFramesWidth = data.nbFramesWidth;
        this.frameWidth = data.width;
        this.frameHeight = data.height;
        this.filepath = data.filepath;
        this.animations = data.animations;
      }

      Sprite.prototype.setFrame = function(id) {
        var x, y;
        x = (id % this.nbFramesWidth) * this.frameWidth;
        y = Math.floor(id / this.nbFramesWidth) * this.frameHeight;
        return this.entity.setBackground(this.filepath, x, y);
      };

      Sprite.prototype.createAnimations = function() {
        var animations, data, name, _ref;
        animations = {};
        _ref = this.animations;
        for (name in _ref) {
          data = _ref[name];
          animations[name] = new Animation(name, data.frames, data.interval, this);
        }
        return animations;
      };

      return Sprite;

    })();
  });

}).call(this);
