// Generated by CoffeeScript 1.3.3
(function() {

  define(['lib/jquery', 'data', 'level'], function($, Data, Level) {
    var App;
    return App = (function() {

      function App() {
        this.currentLevel = null;
      }

      App.prototype.load = function(callback) {
        return Data.load(callback);
      };

      App.prototype.initLevelSelector = function() {
        var index, levelid, position, _ref, _results;
        index = 1;
        _ref = Data.store.levelselector.levels;
        _results = [];
        for (levelid in _ref) {
          position = _ref[levelid];
          $('<div></div>', {
            'class': 'level',
            'data-levelid': levelid
          }).text(index).css({
            left: position[0] - 25,
            top: position[1] - 25
          }).appendTo('#level-selector');
          _results.push(index++);
        }
        return _results;
      };

      App.prototype.startLevel = function(levelid) {
        var level;
        level = new Level(levelid, this);
        this.currentLevel = level;
        return this.switchView('game');
      };

      App.prototype.center = function() {
        var left, top;
        top = window.innerHeight / 2 - 576 / 2;
        left = window.innerWidth / 2 - 928 / 2;
        return $('.view').css({
          top: top < 0 ? 0 : top,
          left: left < 0 ? 0 : left
        });
      };

      App.prototype.switchView = function(view) {
        $(".view").hide();
        return $(".view[data-view='" + view + "']").show();
      };

      return App;

    })();
  });

}).call(this);
